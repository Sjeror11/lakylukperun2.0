#####################################################
# Perun Trading System Environment Configuration    #
# Detailed instructions for obtaining credentials   #
#####################################################

# --- üè¶ Brokerage: Alpaca (Required) ---
# Purpose: Connects to the stock market for data and trading.
ALPACA_API_KEY=AKJYB42QYBVD1EKBDQJ8
ALPACA_SECRET_KEY=SczRiShhbzjejIYP8KKcg50XIhJMIyR895vi1hGI
ALPACA_BASE_URL=https://api.alpaca.markets # Live Trading!

# --- üß† LLM & Research APIs (Optional Keys, Required Models) ---
# Purpose: Provide AI capabilities for analysis and research. You only need keys for the services whose models you specify below.

# --- OpenAI ---
OPENAI_API_KEY=sk-your-openai-api-key-here

# --- Google Gemini ---
GEMINI_API_KEY=test123456789

# --- Perplexity AI ---
PERPLEXITY_API_KEY=test123456789

# --- Model Selection (Required) ---
# Purpose: Tell Perun which specific AI models to use for different tasks.
TRADING_ANALYSIS_LLM_MODEL="gpt-3.5-turbo" # Model for the main trading decisions
MEMORY_ORGANIZATION_LLM_MODEL="gpt-3.5-turbo" # Can often use a cheaper/faster model here
OPTIMIZATION_LLM_MODEL="gpt-3.5-turbo" # Model used by the optimization service

# --- üì¢ Notifications (Optional) ---
# Purpose: Receive alerts about trades, errors, or system status.

# --- Mattermost ---
MATTERMOST_ENABLED=false # Set to true to enable
MATTERMOST_URL=https://your.mattermost.instance.com
MATTERMOST_TOKEN=YOUR_MATTERMOST_BOT_TOKEN_HERE
MATTERMOST_TEAM_ID=YOUR_MATTERMOST_TEAM_ID_HERE
MATTERMOST_CHANNEL_ID=YOUR_TARGET_CHANNEL_ID_HERE

# --- Email (SMTP) ---
EMAIL_ENABLED=false # Set to true to enable
SMTP_SERVER=smtp.example.com
SMTP_PORT=587
SMTP_USERNAME=your_email@example.com
SMTP_PASSWORD=your_email_password_or_app_password
ADMIN_EMAIL=recipient_email@example.com

# --- üìÅ File Paths (Required - Relative to project root) ---
# Purpose: Define where Perun stores its data and finds its prompts. Defaults are usually fine.
MEMDIR_PATH=data/memdir
LOG_PATH=data/logs
PROMPTS_PATH=prompts

# --- üìà Trading Parameters (Required) ---
# Purpose: Define core trading behavior and risk management rules.
DEFAULT_SYMBOLS=AAPL,MSFT,GOOG # Comma-separated list of symbols to trade
MAX_POSITION_SIZE=10000 # Maximum value (USD) per position
MAX_TOTAL_POSITIONS=5 # Maximum number of concurrent open positions
RISK_LIMIT_PERCENT=0.02 # Max risk per trade as % of portfolio equity (e.g., 0.02 = 2%)

# --- üìù Logging Configuration (Optional - Defaults provided) ---
# Purpose: Control how much detail is logged to the console and files.
LOG_LEVEL_CONSOLE=INFO # Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL_FILE=DEBUG
LOG_FILE_NAME=trading_system.log # Log filename within LOG_PATH

# --- üõ†Ô∏è Optimization Parameters (Required if OPTIMIZATION_ENABLED=true) ---
# Purpose: Configure the self-optimization features.
OPTIMIZATION_ENABLED=true # Set to false to disable optimization runs
OPTIMIZATION_SCHEDULE=daily # How often to run optimization (e.g., 'daily', 'weekly', or cron: '0 3 * * 0' for 3 AM Sunday)
OPTIMIZATION_PROMPT_THRESHOLD=0.05 # Min performance improvement (e.g., 5%) needed to automatically switch prompts
OPTIMIZATION_MIN_FREQUENCY=60 # Minimum trading frequency (seconds) allowed by optimization
OPTIMIZATION_FREQUENCY_BUFFER_FACTOR=1.5 # Safety buffer multiplier for frequency calculation
OPTIMIZATION_MEMORY_QUERY_DAYS=30 # How many days of history to query for optimization analysis

# --- üíæ Memory Service Configuration (Required) ---
# Purpose: Configure how the system's memory is managed.
MEMDIR_PRUNE_MAX_AGE_DAYS=90 # Delete memory files older than this (0 to disable age pruning)
MEMDIR_PRUNE_MAX_COUNT=100000 # Max memory files to keep (0 to disable count pruning)
MEMDIR_ORGANIZER_MODEL=sentence-transformers/all-MiniLM-L6-v2 # Model for memory tagging/similarity (runs locally)

# --- üï∞Ô∏è Orchestration Service (Required) ---
# Purpose: Configure the main control loop timing.
MAIN_LOOP_SLEEP_INTERVAL=1 # Sleep interval (seconds) when idle (e.g., outside market hours)
LIQUIDATE_ON_CLOSE=false # Set to true to liquidate all positions before market close
